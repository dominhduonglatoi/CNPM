CREATE DATABASE QLBANHOA

GO

USE QLBANHOA

GO

CREATE TABLE DM_HOA
(
	MAHOA CHAR(30) 	UNIQUE NOT NULL,
	TENHOA NVARCHAR(50) NOT NULL,
	MAUSAC NVARCHAR(15) NOT NULL,
	GIA INT NOT NULL,
	PRIMARY KEY(MAHOA) 
)

INSERT INTO DM_HOA VALUES ('HHong01' ,N'Hoa hồng',N'Đỏ' ,150000)
INSERT INTO DM_HOA VALUES ('HHong02' ,N'Hoa hồng' ,N'Vàng' ,150000)		
INSERT INTO DM_HOA VALUES ('HSen01' ,N'Hoa sen' ,N'Hồng' ,170000)
INSERT INTO DM_HOA VALUES ('HLy01' ,N'Hoa ly', N'Trắng', 230000)
INSERT INTO DM_HOA VALUES ('HLy02', N'Hoa ly', N'Vàng', 230000)
CREATE TABLE KHACHHANG
(
	MAKHACHHANG CHAR(30) 	UNIQUE NOT NULL,
	HOTEN NVARCHAR(50) NOT NULL,
	DIACHI NVARCHAR(100) NOT NULL,
	SODT CHAR(20) NOT NULL,
	PRIMARY KEY(MAKHACHHANG)
)

INSERT INTO KHACHHANG VALUES('KH070922002', N'COO-K', N'426A Nguyễn Thị Thập', '02864681234')
INSERT INTO KHACHHANG VALUES('KH070922003' ,N'Tiêu Thanh',N'115 Đ.Lâm Văn Bền','02825689999')
INSERT INTO KHACHHANG VALUES('KH070922004', N'Lê Hà 565',N'Đ.Trần Hưng Đạo' ,'02871522244')


CREATE TABLE GIAPHIVANCHUYEN
(
	MAKHUVUC CHAR(30)  	UNIQUE NOT NULL,
	TENKHUVUC NVARCHAR(50) NOT NULL,
	KHOANGCACH FLOAT NOT NULL,
	GIA INT NOT NULL,
	PRIMARY KEY(MAKHUVUC),
)

INSERT INTO GIAPHIVANCHUYEN VALUES('KV05',N'Quận 5', 9300 ,70000)
INSERT INTO GIAPHIVANCHUYEN VALUES('KV07',N'Quận 7', 100 ,5000)
INSERT INTO GIAPHIVANCHUYEN VALUES('KVNB',N'Nhà Bè', 250 ,10000)
CREATE TABLE PHIEUDAT
(
	SOPHIEU CHAR(30)  	UNIQUE NOT NULL,
	MAHOA CHAR(30)  NOT NULL,
	MAKHACHHANG CHAR(30) NOT NULL,
	TENNGUOINHAN NVARCHAR(50) NOT NULL,
	DIACHINGUOINHAN NVARCHAR(100) NOT NULL,
	MAKHUVUC CHAR(30) NOT NULL,
	NGAYGIAO DATE NOT NULL,
	GIOGIAO TIME,
	DAGIAO NVARCHAR(15) NOT NULL,
	PRIMARY KEY(SOPHIEU)
)

ALTER TABLE PHIEUDAT ADD CONSTRAINT FK_KHACHHANG_PHIEUDAT FOREIGN KEY(MAKHACHHANG) REFERENCES KHACHHANG
ALTER TABLE PHIEUDAT ADD CONSTRAINT FK_DM_HOA_PHIEUDAT FOREIGN KEY(MAHOA) REFERENCES DM_HOA
ALTER TABLE PHIEUDAT ADD CONSTRAINT FK_GIAPHIVANCHUYEN_PHIEUDAT FOREIGN KEY(MAKHUVUC) REFERENCES GIAPHIVANCHUYEN

SET DATEFORMAT dmy;
INSERT INTO PHIEUDAT VALUES('PD0809220001' ,'HHong01', 'KH070922003', N'Lục Kỳ',N'632 Đ.Lê Văn Lương', 'KV07' ,'13/09/2022', '9:30:00',N'Chưa Giao')
INSERT INTO PHIEUDAT VALUES('PD0809220002', 'HLy01', 'KH070922002', N'Hoàng Ngân', N'426 A Nguyễn Thị Thập','KV07','08/09/2022', '17:30:00',N'Đã Giao')
INSERT INTO PHIEUDAT VALUES('PD0909220001', 'HSen01', 'KH070922004', N'Lê Hà',N'565 Đ.Trần Hưng Đạo' ,'KV05' ,'12/09/2022' ,'7:30:00', N'Chưa Giao')


